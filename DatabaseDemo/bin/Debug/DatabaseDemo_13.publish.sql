/*
Deployment script for PlatformDemoDb

This code was generated by a tool.
Changes to this file may cause incorrect behavior and will be lost if
the code is regenerated.
*/

GO
SET ANSI_NULLS, ANSI_PADDING, ANSI_WARNINGS, ARITHABORT, CONCAT_NULL_YIELDS_NULL, QUOTED_IDENTIFIER ON;

SET NUMERIC_ROUNDABORT OFF;


GO
:setvar DatabaseName "PlatformDemoDb"
:setvar DefaultFilePrefix "PlatformDemoDb"
:setvar DefaultDataPath "C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\DATA\"
:setvar DefaultLogPath "C:\Program Files\Microsoft SQL Server\MSSQL15.MSSQLSERVER\MSSQL\DATA\"

GO
:on error exit
GO
/*
Detect SQLCMD mode and disable script execution if SQLCMD mode is not supported.
To re-enable the script after enabling SQLCMD mode, execute the following:
SET NOEXEC OFF; 
*/
:setvar __IsSqlCmdEnabled "True"
GO
IF N'$(__IsSqlCmdEnabled)' NOT LIKE N'True'
    BEGIN
        PRINT N'SQLCMD mode must be enabled to successfully execute this script.';
        SET NOEXEC ON;
    END


GO
USE [$(DatabaseName)];


GO
PRINT N'Altering Procedure [dbo].[spReport_Insert]...';


GO
ALTER PROCEDURE [dbo].[spReport_Insert]
	@ReportedTeamId nvarchar(50),
	@SenderTeamId nvarchar(50),
	@ReportMessage nvarchar(250)
AS
begin
	insert into dbo.[tblReport] (ReportedTeamId, SenderTeamId, ReportMessage)
	values (@ReportedTeamId, @SenderTeamId, @ReportMessage)
end
GO
PRINT N'Altering Procedure [dbo].[spReport_Update]...';


GO
ALTER PROCEDURE [dbo].[spReport_Update]
	@ReportId int,
	@ReportedTeamId nvarchar(50),
	@SenderTeamId nvarchar(50),
	@ReportMessage nvarchar(250)
AS
begin
	update dbo.[tblReport]
	set ReportedTeamId = @ReportedTeamId, SenderTeamId = @SenderTeamId, ReportMessage = @ReportMessage
	where ReportId = @ReportId;
end
GO
if not exists (select 1 from dbo.[tblTeam])
begin
	insert into dbo.[tblTeam] (ContactPhone, DateOfRegistration, IsInTop5, Lost,PasswordHash,Player1,Player2,Player3,Player4,TeamId,TeamName,Wins, PlaceThatTheTeamRepresents)
	values ('061525846', '2021-6-4', 0, NULL, 'adsa23-411', 'Mirko','Slavko','Jovan','Uros', 'dsadsa2321', 'Tim23', NULL, 'Surcin'),
	('064313245', '2021-6-4', 0, NULL, 'dasds-dsa2', 'Nemanja','Milos','Stefan','Dragan', 'dsadasd2133', 'Druzina', NULL, 'Dobanovci'),
	('063213134', '2021-6-7', 0, NULL, 'dsadsadg-21a', 'Steva','Marko','Jovan','Momcilo', 'gfdghfdg1321', 'Beraci Pamuka', NULL, 'Ugrinovci'),
	('062343243', '2021-6-10', 0, NULL, 'dghtefa-23s', 'Vuk','Vlada','Zarko','Milan', 'gfdgdawer23', 'Beda iz predgradja', NULL, 'Dobanovci'),
	('066564452', '2021-6-6', 0, NULL, 'dasgfdgsg-das', 'Mirko','Slavko','Jovan','Uros', 'dsadf2fd3221', 'KK Mega', NULL, 'Ugrinovci'),
	('0643255757', '2021-6-7', 0, NULL, 'ddssdddd23-33', 'Radovan','Steva','Vuk','Jovan', 'dsadkgkgkd336', 'Padavicari', NULL, 'Dobanovci'),
	('0654356666', '2021-6-12', 0, NULL, 'hjgddgrt-321', 'Stefan','Pedja','Danilo','Momcilo', 'gfdffff8321', 'Virtus', NULL, 'Ugrinovci'),
	('0611111111', '2021-6-11', 0, NULL, 'jkjkjkjgfq-aa', 'Darko','Predrag','Srdjan','Pavle', 'gfdgda442923', 'Tim33', NULL, 'Surcin'),
	('0654545455', '2021-6-1', 0, NULL, 'gfdgdghhhj44-3', 'Milorad','Slavko','Marko','Jovan', 'ddsaguiii3221', 'Sokic', NULL, 'Dobanovci')
end
GO

GO
PRINT N'Update complete.';


GO
